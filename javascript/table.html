<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>create table</title>
    <style>
        table {
            border-collapse: collapse;
            border: 1px solid black;
        }
        th, td {
            border: 1px solid black;
            text-align: center;
        }
        th::before {
            content: '↑';
            cursor : pointer;
        }
        th::after {
            content: '↓';
            opacity: 0.5;
            cursor : pointer;
        }
    </style>
</head>
<body>
<script>
    let xml = new XMLHttpRequest();
    let people = null;

    xml.open(`GET`,`https://kw22228.github.io/Json/data.json`);
    xml.onreadystatechange = function () {
        if (xml.DONE === xml.readyState) {
            people = JSON.parse(xml.responseText);

            makeTable(people['people']);
        }
    }
    xml.send();

    function makeTable(array = null, sort = 0, ascDesc = "asc") {
        let table = document.createElement("table");
        let thead = document.createElement("thead");
        let tbody = document.createElement("tbody");
        let thData = [];
        let trData = [];

        array.forEach(function (ele) {
            let eleKeys = Object.keys(ele);

            eleKeys.filter(x => {
                !thData.includes(x) ? thData.push(x) : null;
            });

            let eleValue = Object.values(ele);
            trData.push(eleValue);
        })

        // thead
        thData.forEach(function (ele) {
            let th = document.createElement("th");
            th.innerText = ele;
            thead.appendChild(th);
        })

        // let a = '>';
        // if (ascDesc === "asc") {
        //     let a = '<';
        // }
        // 데이터 정렬
        // for (let i=0; i<trData.length-1; i++) {
        //     for(let j=0; j<trData.length-1; j++) {
        //         let tmp = null;
        //
        //         if (eval(`trData[j][sort] ${a} trData[j + 1][sort]`)) {
        //             tmp = trData[j];
        //             trData[j] = trData[j + 1];
        //             trData[j + 1] = tmp;
        //         }
        //     }
        // }
        // trData.sort();

        // tbody
        trData.forEach(function (ele) {
            let tr = document.createElement("tr");

            ele.forEach(function (info) {
                let td = document.createElement("td");
                td.innerText = info;
                tr.appendChild(td);
            })

            tbody.appendChild(tr);
        })

        table.appendChild(thead);
        table.appendChild(tbody);

        document.body.prepend(table);

        sort1();
    }

    function sort1() {
        document.getElementsByTagName("table").item(0)
            .querySelector("th")
            .addEventListener("click", function () {
                console.log(this);
            })
    }
</script>
</body>
</html>